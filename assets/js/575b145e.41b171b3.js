"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3943],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(n),h=o,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||i;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var d=2;d<i;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8464:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=n(7462),o=(n(7294),n(3905));const i={},r="Validator onboarding",s={unversionedId:"validator-onboarding",id:"validator-onboarding",title:"Validator onboarding",description:"This page is aimed at validators who want to join Lido for Solana.",source:"@site/docs/validator-onboarding.md",sourceDirName:".",slug:"/validator-onboarding",permalink:"/validator-onboarding",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"solidoSidebar",previous:{title:"Fees",permalink:"/fees"},next:{title:"The Solido utility",permalink:"/operation/the-solido-utility"}},l={},d=[{value:"Validator admission",id:"validator-admission",level:2},{value:"Setting up a vote account",id:"setting-up-a-vote-account",level:2},{value:"Configuring the validator identity",id:"configuring-the-validator-identity",level:2},{value:"Setting up a fee account",id:"setting-up-a-fee-account",level:2},{value:"Setting up a maintainer account",id:"setting-up-a-maintainer-account",level:2},{value:"Final onboarding step",id:"final-onboarding-step",level:2}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"validator-onboarding"},"Validator onboarding"),(0,o.kt)("p",null,"This page is aimed at validators who want to join Lido for Solana."),(0,o.kt)("admonition",{title:"Note for validators",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you have already been admitted by the LNOSG, please continue to ",(0,o.kt)("a",{parentName:"p",href:"#setting-up-a-vote-account"},"Setting up\na vote account")," below.")),(0,o.kt)("h2",{id:"validator-admission"},"Validator admission"),(0,o.kt)("p",null,"The set of validators who participate in Lido for Solana (\u201cSolido\u201d) is managed\nby the ",(0,o.kt)("a",{parentName:"p",href:"https://research.lido.fi/t/validator-admission-process/20"},(0,o.kt)("strong",{parentName:"a"},"Lido Node Operator Subgovernance Group (LNOSG)")),", which is\npart of the Lido DAO. The ",(0,o.kt)("a",{parentName:"p",href:"https://enchanted-direction-844.notion.site/Lido-Node-Operators-19ca4a3e7553421486cd3e8be314bb03"},"Lido Node Operators Notion page")," contains\nfurther information about the current operators, and how to apply."),(0,o.kt)("p",null,"After approval from the LNOSG, the steps to onboard a validator to Solido are:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"The validator")," sets up a new identity account and vote account for use\nwith Solido."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"A multisig owner")," creates a multisig transaction to propose adding the\nvote account to the validator set."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"The other multisig owners")," approve this transaction and execute it. At\nthis point, admission of the validator should already have been approved by\nthe LNOSG; the multisig owners merely ratify and execute the decision, they\ndo not make an independent decision about which validators to admit."),(0,o.kt)("li",{parentName:"ol"},"Once the validator is part of the Solido validator set, the Solido\n",(0,o.kt)("a",{parentName:"li",href:"/operation/maintenance"},"maintenance daemon")," will automatically rebalance the stake\nand delegate to the new validator. In version 1, only new deposits can be\nstaked with new validators; we plan to add active rebalancing in a later\nversion."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"/operation/maintenance#maintainer-operators"},(0,o.kt)("strong",{parentName:"a"},"Some validators"))," are expected to operate an instance of\nthe ",(0,o.kt)("a",{parentName:"li",href:"/operation/maintenance"},"maintenance daemon"),".")),(0,o.kt)("p",null,"The remainder of this page goes over step 1 in detail. For steps 2 and 3,\nsee ",(0,o.kt)("a",{parentName:"p",href:"/operation/multisig-guide"},"the multisig guide")," instead."),(0,o.kt)("h2",{id:"setting-up-a-vote-account"},"Setting up a vote account"),(0,o.kt)("p",null,"Solido requires validators to use a dedicated identity and vote account for use\nwith Solido. See ",(0,o.kt)("a",{parentName:"p",href:"/internals/commission"},"the commission page")," for the\nrationale behind the separate vote account. A separate identity account is\nneeded to clarify that the vote account is part of Solido, to distinguish it\nfrom the validator\u2019s public public vote account."),(0,o.kt)("p",null,"We will assume that you are familiar with ",(0,o.kt)("a",{parentName:"p",href:"https://docs.solana.com/running-validator/vote-accounts"},"setting up a Solana vote\naccount"),", and that you have created a new vote account keypair and\nidentity keypair. For simplicity, we\u2019ll asume they are in files in\n",(0,o.kt)("inlineCode",{parentName:"p"},"~/.config/solana")," below, but Solana supports hardware wallets as well."),(0,o.kt)("p",null,"We need to create an vote account with 100% commission, and the withdraw\nauthority set to Solido, so first we need to know the withdraw authority.\nAssuming ",(0,o.kt)("a",{parentName:"p",href:"/operation/the-solido-utility#configuration"},(0,o.kt)("inlineCode",{parentName:"a"},"solido")," is configured"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"show-authorities")," will print the\nwithdraw authority:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config mainnet.json show-authorities\n\nStake authority:            W1ZQRwUfSkDKy2oefRBUWph82Vr2zg9txWMA8RQazN5\nMint authority:             8kRRsKezwXS21beVDcAoTmih1XbyFnEAMXXiGXz6J3Jz\nRewards withdraw authority: GgrQiJ8s2pfHsfMbEFtNcejnzLegzZ16c9XtJ2X2FpuF\nReserve account:            3Kwv3pEAuoe4WevPB4rgMBTZndGDb53XT7qwQKnvHPfX\n")),(0,o.kt)("p",null,"For the mainnet-beta deployment shown above, the withdraw authority is\n",(0,o.kt)("inlineCode",{parentName:"p"},"GgrQiJ8s2pfHsfMbEFtNcejnzLegzZ16c9XtJ2X2FpuF"),"."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Because the authority addresses are derived from the program and instance\naddresses, ",(0,o.kt)("inlineCode",{parentName:"p"},"show-authorities")," can compute them even when the program has not yet\nbeen deployed, as long as the address where it will be deployed is known. For\nexisting instances, ",(0,o.kt)("inlineCode",{parentName:"p"},"show-solido")," will also show the authorities, and more\ninformation about the instance.")),(0,o.kt)("p",null,"Create a new vote account with that authority and 100% commission, and confirm:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},'$ solana create-vote-account \\\n  --authorized-withdrawer GgrQiJ8s2pfHsfMbEFtNcejnzLegzZ16c9XtJ2X2FpuF \\\n  --commission 100 \\\n  ~/.config/solana/vote.json \\\n  ~/.config/solana/id.json\n\n$ solana-keygen pubkey ~/.config/solana/vote.json\nEAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6\n\n$ solana vote-account EAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6\nAccount Balance: 0.02685864 SOL\nValidator Identity: 9RyFMqXbbUUFEhvA1svJffP7RGAw1fE3YcCtazaom8Me\nVote Authority: {214: "9RyFMqXbbUUFEhvA1svJffP7RGAw1fE3YcCtazaom8Me"}\nWithdraw Authority: GgrQiJ8s2pfHsfMbEFtNcejnzLegzZ16c9XtJ2X2FpuF\nCredits: 0\nCommission: 100%\nRoot Slot: ~\nRecent Timestamp: 1970-01-01T00:00:00Z from slot 0\n')),(0,o.kt)("p",null,"In this case, ",(0,o.kt)("inlineCode",{parentName:"p"},"EAsHKTdxL9GELqQatEFFe3mbSBcbxyEiA8yoPihGhoM6")," is the vote account\naddress, which we need for the final step."),(0,o.kt)("h2",{id:"configuring-the-validator-identity"},"Configuring the validator identity"),(0,o.kt)("p",null,"As a validator, you now have two or more vote accounts:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A public one that anybody can delegate to."),(0,o.kt)("li",{parentName:"ul"},"One for Lido for Solana with 100% commission, that only the Solido program is\nexpected to delegate to.")),(0,o.kt)("p",null,"To distinguish these two in validator lists such as\n",(0,o.kt)("a",{parentName:"p",href:"https://solanabeach.io/validators"},"https://solanabeach.io/validators"),", we ask you to use a separate validator\nidentity account for the Solido vote account. Set the name of your validator to\n\u201cLido / \xabyour-name\xbb\u201d with ",(0,o.kt)("a",{parentName:"p",href:"https://docs.solana.com/running-validator/validator-info"},(0,o.kt)("inlineCode",{parentName:"a"},"solana validator-info")),", and link\nyour Keybase account. For example, for Chorus One, we would run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},'$ solana validator-info publish \\\n  --keypair ~/.config/solana/id.json \\\n  --website https://chorus.one \\\n  --keybase chorusoneinc \\\n  --details "Chorus One validator for Lido for Solana" \\\n  "Lido / Chorus One"\n')),(0,o.kt)("p",null,"Then upload the public key of your identity account to Keybase, as described in\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.solana.com/running-validator/validator-info#keybase"},"this Solana guide"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Be sure to fund the identity account as well, as it pays for the votes.")),(0,o.kt)("h2",{id:"setting-up-a-fee-account"},"Setting up a fee account"),(0,o.kt)("p",null,"In addition to the vote account, we need an SPL token account that can hold\nstSOL, to receive validation fees. For this we need to know the stSOL mint\naddress. For an existing instance, we can use ",(0,o.kt)("inlineCode",{parentName:"p"},"show-solido")," to confirm, but for\nmainnet-beta prior to initialization, ",(0,o.kt)("inlineCode",{parentName:"p"},"show-solido")," cannot show anything yet.\nInstead, we created the SPL token mint ahead of time, and we will initialize the\ninstance with this mint address. ",(0,o.kt)("strong",{parentName:"p"},"The mint address for mainnet-beta is ",(0,o.kt)("a",{parentName:"strong",href:"/deployments#mainnet-beta"},"listed\non the deployments page")),". For an existing instance,\n",(0,o.kt)("inlineCode",{parentName:"p"},"show-solido")," displays the mint address:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ solido --config testnet.json show-solido  \nManager:    F6xN9xSNduk84x6JxKwd3VuENL46TqmTyQiY36mCvwHr\nstSOL mint: 8ry9FhmvhifEBwLPJpg89fAu19rmUHskDVvEfKuDbQbT\n\n(further output omitted)\n")),(0,o.kt)("p",null,"Create an account, and make it owned by an account that you have the private key\nfor (",(0,o.kt)("inlineCode",{parentName:"p"},"6S21...")," in the example below):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"spl-token create-account \\\n  --owner 6S21QCmpAadEhHj3pY2RMbPMGwgYNvS4Pd7zUXoRDMdK \\\n  8ry9FhmvhifEBwLPJpg89fAu19rmUHskDVvEfKuDbQbT\n\nCreating account 3gD74tkT4NAnzUT5SsiYTV5HPgML4wnjjxrxfpjaFXHk\nSignature: eEoNdMgA37pxSQFJafgYHuE3tX6bmCmT6P4w5fhJTs5rWefcboZPSXjCwudvCy6uS3tD6h6tWfm3em2cwg5dCnG\n")),(0,o.kt)("p",null,"This created stSOL account ",(0,o.kt)("inlineCode",{parentName:"p"},"3gD74tkT4NAnzUT5SsiYTV5HPgML4wnjjxrxfpjaFXHk"),",\nwhich we also need for the final step."),(0,o.kt)("h2",{id:"setting-up-a-maintainer-account"},"Setting up a maintainer account"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"This step is only needed for ",(0,o.kt)("a",{parentName:"strong",href:"/operation/maintenance#maintainer-operators"},"the validators who operate an instance of the\nmaintenance daemon"),". If you are not on that list, you can skip this\nstep.")),(0,o.kt)("p",null,"We need to have an account for the maintenance daemon. The daemon needs to be\nable to sign with this account programmatically, so it is recommended to create\na new account for this purpose, and to make sure it never contains a lot of\nfunds; 1.0","\xa0","SOL should be plenty to run the daemon for many months. In this\nexample, we\u2019ll use account ",(0,o.kt)("inlineCode",{parentName:"p"},"F5HwubK4v7VKazPXzRhdvHqA3MmJR5yXDoC8mXeMpdDw"),"."),(0,o.kt)("h2",{id:"final-onboarding-step"},"Final onboarding step"),(0,o.kt)("p",null,"Please share the vote account, stSOL account, and if applicable, your maintainer\naccount, with the multisig members ",(0,o.kt)("a",{parentName:"p",href:"https://forms.gle/sf5syRvkjTGyqNPMA"},"by filling out this\nform"),". Chorus One will then prepare a multisig transaction\nto add your vote account to the Solido instance, and the multisig members will\nbatch-approve these transactions periodically."),(0,o.kt)("p",null,"After your vote account has been added to the instance, the ",(0,o.kt)("a",{parentName:"p",href:"/operation/maintenance"},"maintenance\nbot")," will automatically delegate new deposits to your vote account."))}p.isMDXComponent=!0}}]);